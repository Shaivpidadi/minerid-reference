const addext = require('./services/extensions')

const miningCandidate = {
  'id': 'e706b0e6-793b-448f-a1ae-8ef54459eb72',
  'prevhash': '70f5701644897c92b60e98dbbfe72e1cfd7a2728c6fa3a29c4b4f6e986b0ccaa',
  'coinbaseValue': 5000000974,
  'version': 536870912,
  'nBits': '207fffff',
  'time': 1590152467,
  'height': 106,
  'num_tx': 4,
  'sizeWithoutCoinbase': 1052,
  'merkleProof': [
    '9bd12ce6508574b3163aadb14eab7bd862306da85b221eb284fb41d6012db98f',
    '56f04cc78ac493defced65dd58f4437c67bcc697b59778b0cd96c3c64c1b0bbf'
  ]
}

const getInfo = {
  'version': 101000300,
  'protocolversion': 70015,
  'walletversion': 160300,
  'balance': 199.99997068,
  'blocks': 104,
  'timeoffset': 0,
  'connections': 4,
  'proxy': '',
  'difficulty': 4.656542373906925e-10,
  'testnet': false,
  'stn': false,
  'keypoololdest': 1575386196,
  'keypoolsize': 1999,
  'paytxfee': 0.00000000,
  'relayfee': 0.00000250,
  'errors': '',
  'maxblocksize': 9223372036854775807, //
  'maxminedblocksize': 128000000, //
  'maxstackmemoryusagepolicy': 100000000, //
  'maxstackmemoryusageconsensus': 9223372036854775807 //
}

const feeSpec = {
  'defaultFee': [
    {
      'feeType': 'standard',
      'miningFee': {
        'satoshis': 1,
        'bytes': 1
      },
      'relayFee': {
        'satoshis': 1,
        'bytes': 10
      }
    },
    {
      'feeType': 'data',
      'miningFee': {
        'satoshis': 2,
        'bytes': 1000
      },
      'relayFee': {
        'satoshis': 1,
        'bytes': 10000
      }
    }
  ]
}

// const coinbaseTx = '01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff5903cab609162f5669614254432f4d696e656420627920656d63642f2cfabe6d6d61c4ec065912ba577a48032c5ac8b055e5fc7ff27c929bce1ed9014e2421e5f410000000000000001082d7100e214f74ed563cd37047000200ffffffff0228884425000000001976a914f1c075a01882ae0972f95d3a4177c86c852b7d9188ac00000000000000002b6a2952534b424c4f434b3af66a5416ddf9054eeaa935f9437ecdd4bafcc5786d6bde4986474424002473a600000000'
// // 01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff
// // 59
// // 03
// // cab609
// // 16
// // 2f5669614254432f4d696e656420627920656d63642f
// // 2c
// // fabe6d6d61c4ec065912ba577a48032c5ac8b055e5fc7ff27c929bce1ed9014e2421e5f41000000000000000
// // 10
// // 82d7100e214f74ed563cd37047000200
// // ffffffff0228884425000000001976a914f1c075a01882ae0972f95d3a4177c86c852b7d9188ac00000000000000002b6a2952534b424c4f434b3af66a5416ddf9054eeaa935f9437ecdd4bafcc5786d6bde4986474424002473a600000000'

const coinbase1 = '01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff1c03deb7092f7376706f6f6c2e636f6d2f'
const coinbase2 = 'ffffffff02a1705625000000001976a9145deb9155942e7d38febc15de8870222fd24d080e88ac0000000000000000fd1302006a04ac1eed884dc1017b2276657273696f6e223a22302e31222c22686569676874223a22363336383934222c22707265764d696e65724964223a22303262336335636535326539646139633334363663353865656438383566343839653430346138386135656262626538663738623533616232366333636338613834222c22707265764d696e65724964536967223a223330343430323230376438623462666661663639303566356362626635623836643534646531326366383761366162383066353766633636386365666232643536646530616330303032323033313366343266666361653333343334646163636330376433303036376664343034623563616663626261373266383765666632343736386561333136313731222c226d696e65724964223a22303262336335636535326539646139633334363663353865656438383566343839653430346138386135656262626538663738623533616232366333636338613834222c2276637478223a7b2274784964223a2230346563613165333964393830653964376630613961323365656430386263656134663766313931613864336233383262393137363864343531636637396633222c22766f7574223a307d7d47304502210097adcb9e874c747ee9c821c0dbeb03a4ef9cf8dcaaba35783d71e762430063bc022017eb54ecb6b9f5fb175191c9c576ec86586d5f3496ebce8e91cdaf870c77743200000000'

let doc = {
  'version': '0.1',
  'height': 624455,
  'prevMinerId': '022604665d3a186be9690231a279f8e18b800f4ce78caac2d51940c8c1c92a8354',
  'prevMinerIdSig': '3044022067452f9d9baeef327183e2f565c8c4d76299287d6c0253aa133c75150d78d307022029c9d93ac08c19e20a03dc32307c4f0a023e79a505c02b01857c84d49670acf6',
  'minerId': '022604665d3a186be9690231a279f8e18b800f4ce78caac2d51940c8c1c92a8354',
  'vctx': {
    'txid': '6584f53e13216d34979098362bda34bd3677058c8b4e0621b24395c576b6baad',
    'vout': 0
  }
}
let jobData = {}
jobData.miningCandidate = miningCandidate
jobData.feeSpec = feeSpec
jobData.getInfo = getInfo

addext(doc, coinbase1, coinbase2, jobData)

const util = require('util')
console.log(util.inspect(doc, false, null, true /* enable colors */))
